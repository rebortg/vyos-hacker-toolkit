#!/usr/bin/env python3

import os
import sys
import glob


def update_data(folder, python):
	generated = [
		'# Do not modify this file is autogenerated',
		'data = {}'
	]

	for fname in glob.glob(f'{folder}/*'):
		name = os.path.basename(fname)
		content = open(fname, 'r').read()
		generated.append(f'data["{name}"] = """{content}"""')

	with open(python, 'w') as f:
		f.write('\n\n'.join(generated))

if __name__ == '__main__':
	here = os.path.dirname(os.path.realpath(__file__))
	folder = os.path.abspath(os.path.join(here, '..', 'data'))
	python = os.path.abspath(os.path.join(here, '..', 'lib','vyosextra','data.py'))

	if '--create' in sys.argv:
		update_data(folder, python)
	if '--delete' in sys.argv:
		os.remove(python)
